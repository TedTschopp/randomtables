<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>Random Generator</title>
	<script type="text/javascript" src="JS/generator.js"></script>
	<script type="text/javascript" src="tables/test_tables.js"></script>
	<script type="text/javascript" src="tables/warrior_data.js"></script>
	<!-- Utility Functions -->
	<script type="text/javascript" src="tables/utility.js"></script>


	<script type="text/javascript" src="tables/books.js"></script>
	<script type="text/javascript" src="tables/names.js"></script>
	<script type="text/javascript" src="tables/city.js"></script>
	<script type="text/javascript" src="tables/games.js"></script>
	<script type="text/javascript" src="tables/temples.js"></script>
	<script type="text/javascript" src="tables/treasure.js"></script>
	<script type="text/javascript" src="tables/dice.js"></script>
	<script type="text/javascript" src="tables/gods.js"></script>
	<script type="text/javascript" src="tables/statue.js"></script>
	<script type="text/javascript" src="tables/magical_item.js"></script>


	<!-- Languages-->
	<script type="text/javascript" src="tables/dwarves.js"></script>
	<script type="text/javascript" src="tables/goblinoid.js"></script>

</head>

<body>
	<form method="get" onsubmit="return false;">
		<label>Loaded</label>
		<p><textarea id="loaded" cols="100" rows="10" readonly></textarea></p>
		<label>Input</label>
		<p><textarea id="input" cols="100" rows="10">{welcome_to_town}.</textarea></p>
		<label>Number</label>
		<p><input id="number" value="10"></p>
		<p><input type="button" value="Generate" onclick="more_random();" /></p>
		<label>Output</label><pre id="output"></pre>
		<label>Tables Used</label><span id="TableOutput"></span>

		<!--			<table>
						<tr>
							<th colspan="3">{table_name}</th>
						</tr>
						<tr>
							<th></th>
							<th></th>
							<th>Result
								<th>
						</tr>
						<table>-->

	</form>
	<script type="text/javascript">
			function getParameterByName(name, url) {
				if (!url) {
					url = window.location.href;
				}
				name = name.replace(/[\[\]]/g, "\\$&");
				var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
					results = regex.exec(url);
				if (!results) return null;
				if (!results[2]) return '';
				return decodeURIComponent(results[2].replace(/\+/g, " "));
			}
			function more_random() {
				var OutputField = document.getElementById("output");
				var URLField;
				if (URLField = getParameterByName('table')) {
					var InputField = "{" + URLField + "}";
					document.getElementById("input").value = InputField;
				} else {
					var InputField = document.getElementById("input").value;
				}
				var NumberToGenerate = document.getElementById("number").value;
				var LoadedFields = document.getElementById("loaded");
				LoadedFields.value = JSON.stringify(gen_data, null, 4);
				gen_data['main'] = [InputField];
				if (NumberToGenerate < 1) {
					NumberToGenerate = 1;
				}
				Output = generate_list("main", NumberToGenerate);
				OutputField.innerHTML = Output.join("\n")
			}
			more_random();
	</script>
</body>

</html>
